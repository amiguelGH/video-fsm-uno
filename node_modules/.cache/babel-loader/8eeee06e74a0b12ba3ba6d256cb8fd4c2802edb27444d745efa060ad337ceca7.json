{"ast":null,"code":"import { __spread, __values, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\nfunction keys(value) {\n  return Object.keys(value);\n}\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n    return false;\n  }\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n  return keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\" + event : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\n  }\n}\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n  var value = {};\n  var marker = value;\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n  return value;\n}\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = keys(collection);\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n  return result;\n}\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n  var result = {};\n  try {\n    for (var _b = __values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n      if (!predicate(item)) {\n        continue;\n      }\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n    var result = object;\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n    var result = object;\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n    return result;\n  };\n}\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n  var result = flatten(keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\nfunction flatten(array) {\n  var _a;\n  return (_a = []).concat.apply(_a, __spread(array));\n}\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n  return [value];\n}\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n  return toArrayStrict(value);\n}\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n  var result = {};\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n  return result;\n}\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n  return false;\n}\nfunction partition(items, predicate) {\n  var e_6, _a;\n  var _b = __read([[], []], 2),\n    truthy = _b[0],\n    falsy = _b[1];\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n  return [truthy, falsy];\n}\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n    if (!subStateValue) {\n      return undefined;\n    }\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\nvar warn = function () {};\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n    if (!error && condition) {\n      return;\n    }\n    if (console !== undefined) {\n      var args = [\"Warning: \" + message];\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n      console.warn.apply(console, args);\n    }\n  };\n}\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\nfunction isString(value) {\n  return typeof value === 'string';\n} // export function memoizedGetter<T, TP extends { prototype: object }>(\n//   o: TP,\n//   property: string,\n//   getter: () => T\n// ): void {\n//   Object.defineProperty(o.prototype, property, {\n//     get: getter,\n//     enumerable: false,\n//     configurable: false\n//   });\n// }\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n  return condition;\n}\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\nfunction isMachine(value) {\n  try {\n    return '__xstatenode' in value;\n  } catch (e) {\n    return false;\n  }\n}\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n  return event;\n}\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n  return toArray(target);\n}\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\" + originalError.stack + \"'\" : '';\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\" + currentError.stack + \"'\" : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" + (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\n    }\n  }\n}\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return guard.predicate(context, _event.data, guardMeta);\n  }\n  var condFn = guards[guard.type];\n  if (!condFn) {\n    throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + machine.id + \"'.\");\n  }\n  return condFn(context, _event.data, guardMeta);\n}\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n  return src;\n}\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  if (typeof nextHandler === 'object') {\n    return nextHandler;\n  }\n  var noop = function () {\n    return void 0;\n  };\n  return {\n    next: nextHandler,\n    error: errorHandler || noop,\n    complete: completionHandler || noop\n  };\n}\nexport { evaluateGuard, flatten, getEventType, isActor, isArray, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };","map":{"version":3,"names":["__spread","__values","__read","__assign","DEFAULT_GUARD_TYPE","TARGETLESS_KEY","STATE_DELIMITER","IS_PRODUCTION","keys","value","Object","matchesState","parentStateId","childStateId","delimiter","parentStateValue","toStateValue","childStateValue","isString","every","key","getEventType","event","type","e","Error","toStatePath","stateId","isArray","toString","split","isStateLike","state","stateValue","pathToStateValue","statePath","length","marker","i","mapValues","collection","iteratee","result","collectionKeys","mapFilterValues","predicate","e_1","_a","_b","_c","next","done","item","e_1_1","error","return","call","path","props","object","e_2","props_1","props_1_1","prop","e_2_1","nestedPath","accessorProp","e_3","props_2","props_2_1","e_3_1","toStatePaths","flatten","map","subStateValue","subPath","concat","array","apply","toArrayStrict","toArray","undefined","mapContext","mapper","context","_event","e_5","isFunction","data","subMapper","e_5_1","isBuiltInEvent","eventType","test","isPromiseLike","Promise","then","partition","items","e_6","truthy","falsy","items_1","items_1_1","push","e_6_1","updateHistoryStates","hist","states","subHist","current","updateHistoryValue","updateContext","assignActions","warn","updatedContext","reduce","acc","assignAction","e_7","assignment","meta","action","partialUpdate","propAssignment","e_7_1","assign","condition","message","console","args","Array","toGuard","guardMap","name","isObservable","subscribe","symbolObservable","Symbol","observable","isMachine","isActor","send","uniqueId","currentId","toEventObject","payload","toSCXMLEvent","scxmlEvent","$$type","eventObject","toTransitionConfigArray","configLike","transitions","transitionLike","target","normalizeTarget","reportUnhandledExceptionOnInvocation","originalError","currentError","id","originalStackTrace","stack","stackTrace","evaluateGuard","machine","guard","guards","options","guardMeta","cond","condFn","toInvokeSource","src","toObserver","nextHandler","errorHandler","completionHandler","noop","complete"],"sources":["C:/PoC-FE/video-fsm-uno/node_modules/xstate/es/utils.js"],"sourcesContent":["import { __spread, __values, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction keys(value) {\n  return Object.keys(value);\n}\n\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\n\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\" + event : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\n\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\n  }\n}\n\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\n\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\n\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\n\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\n\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\n\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spread(array));\n}\n\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\n\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\n\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\n\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\n\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\n\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\n\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\n\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \" + message];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction isString(value) {\n  return typeof value === 'string';\n} // export function memoizedGetter<T, TP extends { prototype: object }>(\n//   o: TP,\n//   property: string,\n//   getter: () => T\n// ): void {\n//   Object.defineProperty(o.prototype, property, {\n//     get: getter,\n//     enumerable: false,\n//     configurable: false\n//   });\n// }\n\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\n\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\n\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n\nfunction isMachine(value) {\n  try {\n    return '__xstatenode' in value;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction isActor(value) {\n  return !!value && typeof value.send === 'function';\n}\n\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\n\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\n\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\n\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\n\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\n\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\" + originalError.stack + \"'\" : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\" + currentError.stack + \"'\" : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" + (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\n    }\n  }\n}\n\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return guard.predicate(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + machine.id + \"'.\");\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\n\nfunction toObserver(nextHandler, errorHandler, completionHandler) {\n  if (typeof nextHandler === 'object') {\n    return nextHandler;\n  }\n\n  var noop = function () {\n    return void 0;\n  };\n\n  return {\n    next: nextHandler,\n    error: errorHandler || noop,\n    complete: completionHandler || noop\n  };\n}\n\nexport { evaluateGuard, flatten, getEventType, isActor, isArray, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toObserver, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}