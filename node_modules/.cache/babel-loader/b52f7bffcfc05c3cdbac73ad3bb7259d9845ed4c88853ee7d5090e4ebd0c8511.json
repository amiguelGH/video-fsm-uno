{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nvar __spread = this && this.__spread || function () {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n  return ar;\n};\nimport { useEffect, useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport { ReactEffectType } from './types';\nimport { partition } from './utils';\nfunction executeEffect(action, state) {\n  var exec = action.exec;\n  var originalExec = exec(state.context, state._event.data, {\n    action: action,\n    state: state,\n    _event: state._event\n  });\n  originalExec();\n}\nexport function useReactEffectActions(service) {\n  var effectActionsRef = useRef([]);\n  var layoutEffectActionsRef = useRef([]);\n  useIsomorphicLayoutEffect(function () {\n    var sub = service.subscribe(function (currentState) {\n      var _a, _b;\n      if (currentState.actions.length) {\n        var reactEffectActions = currentState.actions.filter(function (action) {\n          return typeof action.exec === 'function' && '__effect' in action.exec;\n        });\n        var _c = __read(partition(reactEffectActions, function (action) {\n            return action.exec.__effect === ReactEffectType.Effect;\n          }), 2),\n          effectActions = _c[0],\n          layoutEffectActions = _c[1];\n        (_a = effectActionsRef.current).push.apply(_a, __spread(effectActions.map(function (effectAction) {\n          return [effectAction, currentState];\n        })));\n        (_b = layoutEffectActionsRef.current).push.apply(_b, __spread(layoutEffectActions.map(function (layoutEffectAction) {\n          return [layoutEffectAction, currentState];\n        })));\n      }\n    });\n    return function () {\n      sub.unsubscribe();\n    };\n  }, []);\n  // this is somewhat weird - this should always be flushed within useLayoutEffect\n  // but we don't want to receive warnings about useLayoutEffect being used on the server\n  // so we have to use `useIsomorphicLayoutEffect` to silence those warnings\n  useIsomorphicLayoutEffect(function () {\n    while (layoutEffectActionsRef.current.length) {\n      var _a = __read(layoutEffectActionsRef.current.shift(), 2),\n        layoutEffectAction = _a[0],\n        effectState = _a[1];\n      executeEffect(layoutEffectAction, effectState);\n    }\n  }); // https://github.com/davidkpiano/xstate/pull/1202#discussion_r429677773\n  useEffect(function () {\n    while (effectActionsRef.current.length) {\n      var _a = __read(effectActionsRef.current.shift(), 2),\n        effectAction = _a[0],\n        effectState = _a[1];\n      executeEffect(effectAction, effectState);\n    }\n  });\n}","map":{"version":3,"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","__spread","arguments","length","concat","useEffect","useRef","useIsomorphicLayoutEffect","ReactEffectType","partition","executeEffect","action","state","exec","originalExec","context","_event","data","useReactEffectActions","service","effectActionsRef","layoutEffectActionsRef","sub","subscribe","currentState","_a","_b","actions","reactEffectActions","filter","_c","__effect","Effect","effectActions","layoutEffectActions","current","apply","map","effectAction","layoutEffectAction","unsubscribe","shift","effectState"],"sources":["C:/PoC-FE/video-fsm-uno/node_modules/@xstate/react/es/useReactEffectActions.js"],"sourcesContent":["var __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spread = (this && this.__spread) || function () {\n    for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n    return ar;\n};\nimport { useEffect, useRef } from 'react';\nimport useIsomorphicLayoutEffect from 'use-isomorphic-layout-effect';\nimport { ReactEffectType } from './types';\nimport { partition } from './utils';\nfunction executeEffect(action, state) {\n    var exec = action.exec;\n    var originalExec = exec(state.context, state._event.data, {\n        action: action,\n        state: state,\n        _event: state._event\n    });\n    originalExec();\n}\nexport function useReactEffectActions(service) {\n    var effectActionsRef = useRef([]);\n    var layoutEffectActionsRef = useRef([]);\n    useIsomorphicLayoutEffect(function () {\n        var sub = service.subscribe(function (currentState) {\n            var _a, _b;\n            if (currentState.actions.length) {\n                var reactEffectActions = currentState.actions.filter(function (action) {\n                    return (typeof action.exec === 'function' &&\n                        '__effect' in action.exec);\n                });\n                var _c = __read(partition(reactEffectActions, function (action) {\n                    return action.exec.__effect === ReactEffectType.Effect;\n                }), 2), effectActions = _c[0], layoutEffectActions = _c[1];\n                (_a = effectActionsRef.current).push.apply(_a, __spread(effectActions.map(function (effectAction) { return [effectAction, currentState]; })));\n                (_b = layoutEffectActionsRef.current).push.apply(_b, __spread(layoutEffectActions.map(function (layoutEffectAction) { return [layoutEffectAction, currentState]; })));\n            }\n        });\n        return function () {\n            sub.unsubscribe();\n        };\n    }, []);\n    // this is somewhat weird - this should always be flushed within useLayoutEffect\n    // but we don't want to receive warnings about useLayoutEffect being used on the server\n    // so we have to use `useIsomorphicLayoutEffect` to silence those warnings\n    useIsomorphicLayoutEffect(function () {\n        while (layoutEffectActionsRef.current.length) {\n            var _a = __read(layoutEffectActionsRef.current.shift(), 2), layoutEffectAction = _a[0], effectState = _a[1];\n            executeEffect(layoutEffectAction, effectState);\n        }\n    }); // https://github.com/davidkpiano/xstate/pull/1202#discussion_r429677773\n    useEffect(function () {\n        while (effectActionsRef.current.length) {\n            var _a = __read(effectActionsRef.current.shift(), 2), effectAction = _a[0], effectState = _a[1];\n            executeEffect(effectAction, effectState);\n        }\n    });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}